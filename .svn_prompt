# Returns (svn:<revision>:<branch|tag>[*]) if applicable
svn_prompt() {
    if [ -d ".svn" ]; then
        local branch dirty rev info=$(svn info 2>/dev/null)
        
        branch=$(svn_parse_branch "$info")
        
        if [ "$branch" != "" ] ; then
           echo " ($branch)"
        fi
    fi
}
 
# Returns the current branch or tag name from the given `svn info` output
svn_parse_branch() {
    local chunk url=$(echo "$1" | awk '/^URL: .*/{print $2}')
    
    echo $url | grep -q "/trunk\b"
    if [ $? -eq 0 ] ; then
        echo trunk
        return
    else
        chunk=$(echo $url | grep -o "/releases.*")
        if [ "$chunk" == "" ] ; then
            chunk=$(echo $url | grep -o "/branches.*")
            if [ "$chunk" == "" ] ; then
                chunk=$(echo $url | grep -o "/tags.*")
            fi
        fi
    fi
    
    echo $chunk | awk -F/ '{print $3}'
}
